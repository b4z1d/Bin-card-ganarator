<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DevTools Dashboard</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Custom transitions for smoother UI toggling */
        .fade-in {
            animation: fadeIn 0.3s ease-in-out;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        body {
            font-family: 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
        }
    </style>
</head>
<body class="bg-slate-900 text-white min-h-screen flex items-center justify-center p-4">

    <div class="w-full max-w-md md:max-w-2xl bg-slate-800 rounded-2xl shadow-2xl overflow-hidden border border-slate-700 p-6 relative min-h-[500px]">
        
        <header class="mb-8 text-center">
            <h1 class="text-3xl font-bold tracking-wider text-slate-200">CC TOOLS <span class="text-blue-500">DASHBOARD</span></h1>
            <p class="text-slate-400 text-sm mt-2">Developer Utilities Suite</p>
        </header>

        <div id="main-menu" class="grid grid-cols-1 md:grid-cols-2 gap-4 fade-in">
            <button onclick="showTool('bin-checker')" class="h-32 rounded-xl bg-orange-500 hover:bg-orange-600 transition-all transform hover:scale-105 flex flex-col items-center justify-center shadow-lg group">
                <span class="text-4xl mb-2 group-hover:animate-bounce">üîç</span>
                <span class="font-bold text-lg">BIN Checker</span>
            </button>

            <button onclick="showTool('card-generator')" class="h-32 rounded-xl bg-pink-600 hover:bg-pink-700 transition-all transform hover:scale-105 flex flex-col items-center justify-center shadow-lg group">
                <span class="text-4xl mb-2 group-hover:rotate-12 transition-transform">üí≥</span>
                <span class="font-bold text-lg">Card Generator</span>
            </button>

            <button onclick="showTool('card-checker')" class="h-32 rounded-xl bg-green-600 hover:bg-green-700 transition-all transform hover:scale-105 flex flex-col items-center justify-center shadow-lg group">
                <span class="text-4xl mb-2 group-hover:pulse">‚úÖ</span>
                <span class="font-bold text-lg">Luhn Checker</span>
            </button>

            <button onclick="showTool('bin-generator')" class="h-32 rounded-xl bg-red-500 hover:bg-red-600 transition-all transform hover:scale-105 flex flex-col items-center justify-center shadow-lg group">
                <span class="text-4xl mb-2">üé≤</span>
                <span class="font-bold text-lg">BIN Generator</span>
            </button>
        </div>

        <div id="bin-checker" class="tool-view hidden fade-in">
            <h2 class="text-2xl font-bold text-orange-500 mb-4">BIN Checker</h2>
            <p class="text-slate-400 mb-4">Enter the first 6 or 8 digits of a card.</p>
            <input type="text" id="bin-input" maxlength="8" placeholder="e.g. 453201" class="w-full bg-slate-900 border border-slate-600 rounded-lg p-3 text-white focus:outline-none focus:border-orange-500 mb-4 text-center text-xl tracking-widest">
            <button onclick="checkBIN()" class="w-full bg-orange-500 hover:bg-orange-600 text-white font-bold py-3 rounded-lg mb-4">Check BIN</button>
            <div id="bin-result" class="bg-slate-900 p-4 rounded-lg min-h-[100px] flex items-center justify-center text-slate-400">
                Waiting for input...
            </div>
            <button onclick="goBack()" class="mt-6 text-slate-400 hover:text-white underline w-full text-center">Back to Menu</button>
        </div>

        <div id="card-generator" class="tool-view hidden fade-in">
            <h2 class="text-2xl font-bold text-pink-500 mb-4">Card Generator</h2>
            <p class="text-slate-400 mb-4">Generate valid test numbers from a BIN.</p>
            <div class="flex gap-2 mb-4">
                <input type="text" id="gen-bin-input" maxlength="6" value="400000" class="flex-1 bg-slate-900 border border-slate-600 rounded-lg p-3 text-white text-center tracking-widest" placeholder="BIN (6 digits)">
                <button onclick="generateCard()" class="bg-pink-600 hover:bg-pink-700 text-white px-6 rounded-lg font-bold">Gen</button>
            </div>
            <div id="gen-result" class="bg-slate-900 p-4 rounded-lg text-center text-2xl font-mono tracking-widest text-pink-400 break-all">
                ----------------
            </div>
            <p class="text-xs text-slate-500 mt-2 text-center">*Generates Luhn-valid numbers for testing only.</p>
            <button onclick="goBack()" class="mt-6 text-slate-400 hover:text-white underline w-full text-center">Back to Menu</button>
        </div>

        <div id="card-checker" class="tool-view hidden fade-in">
            <h2 class="text-2xl font-bold text-green-500 mb-4">Luhn Validator</h2>
            <p class="text-slate-400 mb-4">Validate card number checksum.</p>
            <input type="text" id="luhn-input" placeholder="Enter Card Number" class="w-full bg-slate-900 border border-slate-600 rounded-lg p-3 text-white focus:outline-none focus:border-green-500 mb-4 text-center text-lg tracking-widest">
            <button onclick="validateLuhn()" class="w-full bg-green-600 hover:bg-green-700 text-white font-bold py-3 rounded-lg mb-4">Validate</button>
            <div id="luhn-result" class="hidden p-4 rounded-lg text-center font-bold text-xl"></div>
            <button onclick="goBack()" class="mt-6 text-slate-400 hover:text-white underline w-full text-center">Back to Menu</button>
        </div>

        <div id="bin-generator" class="tool-view hidden fade-in">
            <h2 class="text-2xl font-bold text-red-500 mb-4">BIN Generator</h2>
            <p class="text-slate-400 mb-4">Generate random Bank Identification Numbers.</p>
            <button onclick="generateRandomBIN()" class="w-full bg-red-500 hover:bg-red-600 text-white font-bold py-3 rounded-lg mb-4">Generate Random BIN</button>
            <div id="bin-gen-result" class="bg-slate-900 p-4 rounded-lg text-center text-3xl font-mono tracking-widest text-red-400">
                ------
            </div>
            <button onclick="goBack()" class="mt-6 text-slate-400 hover:text-white underline w-full text-center">Back to Menu</button>
        </div>

    </div>

    <script>
        // --- Navigation Logic ---
        function showTool(toolId) {
            document.getElementById('main-menu').classList.add('hidden');
            // Hide all tools first
            document.querySelectorAll('.tool-view').forEach(el => el.classList.add('hidden'));
            // Show selected
            document.getElementById(toolId).classList.remove('hidden');
        }

        function goBack() {
            document.querySelectorAll('.tool-view').forEach(el => el.classList.add('hidden'));
            document.getElementById('main-menu').classList.remove('hidden');
        }

        // --- 1. BIN Checker Logic ---
        async function checkBIN() {
            const bin = document.getElementById('bin-input').value.substring(0, 6);
            const display = document.getElementById('bin-result');
            
            if (bin.length < 6) {
                display.innerHTML = '<span class="text-red-500">Please enter at least 6 digits.</span>';
                return;
            }

            display.innerHTML = '<span class="animate-pulse">Searching database...</span>';

            // Mock Data fallback (in case API limits are hit or CORS blocks request)
            const mockData = {
                '453201': { scheme: 'visa', type: 'debit', bank: { name: 'JPMORGAN CHASE BANK' } },
                '542418': { scheme: 'mastercard', type: 'credit', bank: { name: 'CITIBANK' } },
                '378282': { scheme: 'amex', type: 'credit', bank: { name: 'AMERICAN EXPRESS' } }
            };

            try {
                // Try public API
                const response = await fetch(`https://lookup.binlist.net/${bin}`, {
                    headers: { 'Accept-Version': '3' }
                });
                
                if (!response.ok) throw new Error('API Error');
                
                const data = await response.json();
                renderBinData(data, display);
            } catch (error) {
                // Fallback to local logic or mock
                if(mockData[bin]) {
                    renderBinData(mockData[bin], display);
                } else {
                    display.innerHTML = `
                        <div class="text-left w-full">
                            <p class="text-yellow-500 mb-2">‚ö†Ô∏è API Limit/Offline. Showing derived info:</p>
                            <p><strong>Brand:</strong> ${getCardBrand(bin)}</p>
                            <p class="text-xs text-slate-500 mt-2">Detailed bank info unavailable.</p>
                        </div>
                    `;
                }
            }
        }

        function renderBinData(data, element) {
            element.innerHTML = `
                <div class="text-left w-full space-y-1">
                    <p><span class="text-slate-500">Scheme:</span> <span class="uppercase font-bold text-white">${data.scheme || 'Unknown'}</span></p>
                    <p><span class="text-slate-500">Type:</span> <span class="uppercase text-white">${data.type || 'Unknown'}</span></p>
                    <p><span class="text-slate-500">Bank:</span> <span class="text-blue-400">${data.bank ? data.bank.name : 'Unknown'}</span></p>
                    <p><span class="text-slate-500">Country:</span> ${data.country ? data.country.emoji : ''} ${data.country ? data.country.name : 'Unknown'}</p>
                </div>
            `;
        }

        function getCardBrand(bin) {
            if(bin.startsWith('4')) return 'Visa';
            if(bin.startsWith('5')) return 'Mastercard';
            if(bin.startsWith('3')) return 'Amex';
            if(bin.startsWith('6')) return 'Discover';
            return 'Unknown';
        }

        // --- 2. Card Generator Logic (Luhn Valid) ---
        function generateCard() {
            let bin = document.getElementById('gen-bin-input').value || '400000';
            if(bin.length < 6) bin = bin.padEnd(6, '0');
            
            // Generate 9 random digits (total 15 so far)
            let cardNumber = bin;
            while (cardNumber.length < 15) {
                cardNumber += Math.floor(Math.random() * 10);
            }

            // Calculate Check Digit
            const checkDigit = calculateLuhnCheckDigit(cardNumber);
            document.getElementById('gen-result').innerText = cardNumber + checkDigit;
        }

        function calculateLuhnCheckDigit(numberStr) {
            let sum = 0;
            for (let i = 0; i < numberStr.length; i++) {
                let digit = parseInt(numberStr[numberStr.length - 1 - i]);
                // Invert logic because we are calculating the NEXT digit (the check digit)
                // Standard Luhn validates entire string. To find check digit, we treat it as if we are validating [Number + X]
                // For generation, we iterate the 15 digits. 
                // Weight pattern for the *payload* (without check digit) depends on length.
                // For 15 digits, the weights (right to left) are 2, 1, 2, 1...
                
                if (i % 2 === 0) { // Positions 15, 13, 11... (which are "even" indices from the end 0, 2, 4 in loop)
                    digit *= 2;
                    if (digit > 9) digit -= 9;
                }
                sum += digit;
            }
            return (sum * 9) % 10; 
        }

        // --- 3. Luhn Checker Logic ---
        function validateLuhn() {
            const val = document.getElementById('luhn-input').value.replace(/\D/g, '');
            const resultBox = document.getElementById('luhn-result');
            
            if (val.length < 13) {
                resultBox.className = "bg-red-900/50 p-4 rounded-lg text-center font-bold text-xl text-red-200";
                resultBox.innerText = "Too short";
                resultBox.classList.remove('hidden');
                return;
            }

            let sum = 0;
            let shouldDouble = false;
            // Loop from right to left
            for (let i = val.length - 1; i >= 0; i--) {
                let digit = parseInt(val.charAt(i));

                if (shouldDouble) {
                    if ((digit *= 2) > 9) digit -= 9;
                }

                sum += digit;
                shouldDouble = !shouldDouble;
            }

            const isValid = (sum % 10) === 0;

            resultBox.classList.remove('hidden');
            if(isValid) {
                resultBox.className = "bg-green-900/50 border border-green-500 p-4 rounded-lg text-center font-bold text-xl text-green-400";
                resultBox.innerHTML = `VALID <span class="text-sm block font-normal text-green-200 mt-1">Luhn Check Passed</span>`;
            } else {
                resultBox.className = "bg-red-900/50 border border-red-500 p-4 rounded-lg text-center font-bold text-xl text-red-400";
                resultBox.innerHTML = `INVALID <span class="text-sm block font-normal text-red-200 mt-1">Checksum Failed</span>`;
            }
        }

        // --- 4. BIN Generator Logic ---
        function generateRandomBIN() {
            const prefixes = ['4', '51', '52', '53', '54', '55', '34', '37', '6011'];
            const prefix = prefixes[Math.floor(Math.random() * prefixes.length)];
            
            let bin = prefix;
            while(bin.length < 6) {
                bin += Math.floor(Math.random() * 10);
            }
            
            document.getElementById('bin-gen-result').innerText = bin;
        }
    </script>
</body>
  </html>
